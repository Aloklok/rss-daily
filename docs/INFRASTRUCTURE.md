# 基础设施架构文档 (Infrastructure)

本文档记录了 Briefing Hub 的全球服务分布及网络拓扑，用于性能审计与稳定性评估。

## 1. 全球服务分布

```
🧑‍💻 用户 (中国) ───[30ms]───► 🇯🇵 东京 (Vercel Edge / Cloudflare)
                                  │
          ┌───────────────────────┴───────────────────────┐
          ▼ [80ms]                                        ▼ [250ms]
    🇰🇷 韩国 (Supabase)                              🇮🇩 印尼 (FreshRSS)
    文章数据/向量/图片存储                           用户状态 (已读/收藏)
```

## 2. 核心服务清单

| 服务            | 提供商        | 物理位置      | 核心职责                     | 延迟感官 |
| :-------------- | :------------ | :------------ | :--------------------------- | :------- |
| **前端/Edge**   | Vercel        | 🇰🇷 韩国首尔   | SSR/ISR 渲染、边缘重验       | 极速 ✅  |
| **数据库/图片** | Supabase      | 🇰🇷 韩国首尔   | 数据存储、向量检索、图片托管 | 稳定 ✅  |
| **用户状态**    | FreshRSS      | 🇮🇩 印尼雅加达 | 同步已读/星标状态            | 良好 ✅  |
| **AI 服务**     | Google Gemini | 全球 API      | 摘要生成与内容向量化         | 稳定 ✅  |
| **图片 CDN**    | Cloudflare    | 全球          | 代理 Supabase 存储以加速访问 | 极速 ✅  |

## 3. 架构优化总结

- **去美国化**：关键数据链路已全部移回亚洲。FreshRSS 迁移至 **印尼 (Zeabur)** 后，响应速度提升了 80%+。
- **全能 Supabase**：图片存储与数据库共用韩国节点，简化了鉴权逻辑并保持了优秀的访问速度。
- **边缘加速**：Cloudflare 负责静态资源与图片的全球加速，Vercel Edge 负责极速生成 HTML。

---

> [!NOTE]
> 详细的环境变量配置请参考私有的 `.env.local` 文件。
