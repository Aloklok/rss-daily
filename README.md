# Briefing Hub é¡¹ç›®æ–‡æ¡£

> [!NOTE]
> **SEO ä¸ æ¸²æŸ“æ¶æ„æ¦‚è§ˆ**
>
> | é¡µé¢ç±»å‹          | è·¯ç”±                | æ¸²æŸ“ç­–ç•¥        | æ•°æ®è·å–              | å¯çˆ¬å–æ€§                     |
> | :---------------- | :------------------ | :-------------- | :-------------------- | :--------------------------- |
> | **é¦–é¡µ / ç®€æŠ¥**   | `/`, `/date/[date]` | **é˜»å¡å¼ SSR**  | æœåŠ¡ç«¯ `fetch` (é˜»å¡) | âœ… å®Œå…¨ (HTML åŒ…å«å®Œæ•´å†…å®¹)  |
> | **æ–‡ç« è¯¦æƒ…**      | `/article/[id]`     | **SSR**         | æœåŠ¡ç«¯ `fetch` (é˜»å¡) | âœ… å®Œå…¨ (æœåŠ¡ç«¯å†…å®¹è·å–)     |
> | **Stream / æ ‡ç­¾** | `/stream/[id]`      | **ISR (7å¤©)**   | æŒ‰éœ€é‡éªŒè¯            | âœ… å®Œå…¨ (æœåŠ¡ç«¯æ•°æ®æ°´åˆ)     |
> | **æŒ‰æºæµè§ˆ**      | `/sources`          | **Dynamic SSR** | æœåŠ¡ç«¯ `fetch` + CSR  | âœ… å®Œå…¨ (Shell) + å®¢æˆ·ç«¯æ•°æ® |
> | **è¶‹åŠ¿**          | `/trends`           | **SSG**         | æ„å»ºæ—¶ç”Ÿæˆ            | âœ… å®Œå…¨ (é™æ€ HTML)          |
>
> **æ ¸å¿ƒ SEO ç‰¹æ€§:**
>
> - **é›¶å®¢æˆ·ç«¯å†…å®¹è·å–**: æ‰€æœ‰æ–‡ç« å†…å®¹å‡åœ¨æœåŠ¡ç«¯è·å–ã€‚
> - **å†…éƒ¨é“¾æ¥**: æ–‡ç« æ ‡é¢˜é“¾æ¥è‡³ `/article/[id]`ï¼Œç¡®ä¿æ·±åº¦çˆ¬å–ã€‚
> - **Sitemap**: å…¨è‡ªåŠ¨ç”Ÿæˆã€‚åˆ†ç±»ï¼ˆæ¯æ—¥ï¼‰ï¼Œæ ‡ç­¾ï¼ˆæ´»è·ƒ Top 50ï¼‰ï¼Œç®€æŠ¥ï¼ˆæ¯æ—¥ï¼‰ã€‚
> - **Canonical**: å¼ºåˆ¶ç»Ÿä¸€ä¸º `https://www.alok-rss.top`ã€‚

## é¡¹ç›®æ¦‚è¿°

Briefing Hub æ˜¯ä¸€ä¸ªåŸºäº **Next.js (App Router)** å’Œ TypeScript æ„å»ºçš„ç°ä»£åŒ– RSS é˜…è¯»å™¨å‰ç«¯ã€‚å®ƒé‡‡ç”¨ **æ··åˆæ¸²æŸ“æ¶æ„ (SSR + ISR + SSG)**ï¼Œç»“åˆ Supabase ä½œä¸ºæ–‡ç« è¯¦æƒ…çš„æ•°æ®æºï¼Œä½¿ç”¨ FreshRSS ä½œä¸º RSS è®¢é˜…å’ŒçŠ¶æ€ç®¡ç†çš„æ ¸å¿ƒæœåŠ¡ã€‚åº”ç”¨æä¾›äº†ä¸€ä¸ªç®€æ´ã€é«˜æ•ˆçš„ç•Œé¢æ¥æµè§ˆæ¯æ—¥ç®€æŠ¥ã€ç®¡ç†æ–‡ç« åˆ†ç±»å’Œæ ‡ç­¾ï¼Œå¹¶æ”¯æŒå…¨æ–‡é˜…è¯»å’Œæ¸è¿›å¼ Web åº”ç”¨ï¼ˆPWAï¼‰åŠŸèƒ½ã€‚

## æ ¸å¿ƒç‰¹æ€§

- **æ··åˆæ¸²æŸ“æ¶æ„**ï¼š
  - **æ¯æ—¥ç®€æŠ¥**ï¼šé‡‡ç”¨é˜»å¡å¼æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œç¡®ä¿åœ¨é¦–å± HTML ä¸­ç›´æ¥è¿”å›å®Œæ•´å†…å®¹ï¼ˆå«æ­£æ–‡ï¼‰ï¼Œå½»åº•è§£å†³ No-JS ç¯å¢ƒä¸‹çš„ SEO å’ŒåŠ è½½é—®é¢˜ã€‚
  - **æ–‡ç« è¯¦æƒ…**ï¼šæ–‡ç« æ­£æ–‡ç”±æœåŠ¡ç«¯ç›´æ¥æ‹‰å–ï¼Œä¸å†ä¾èµ–å®¢æˆ·ç«¯ JSï¼Œå®ç°â€œæœåŠ¡ç«¯ç›´å‡ºâ€çš„å®Œç¾é˜…è¯»ä½“éªŒã€‚
    - **ç»Ÿä¸€æ•°æ®æº**: æ–‡ç« é˜…è¯»æ¨¡æ€æ¡†ä¸ ISR è¯¦æƒ…é¡µ (`/article/[id]`) å…±äº«å®Œå…¨ç›¸åŒçš„ `fetchArticleContentServer` è·å–ä¸æ¸…æ´—é€»è¾‘ï¼Œç¡®ä¿æ— è®ºä»ä½•å¤„é˜…è¯»ï¼Œå†…å®¹ä¸ç¼“å­˜ç­–ç•¥çš†ä¸€è‡´ã€‚
  - **è¶‹åŠ¿é¡µé¢ (SSG)**ï¼šè¶‹åŠ¿å·¥å…·é¡µé¢é‡‡ç”¨é™æ€ç«™ç‚¹ç”Ÿæˆï¼Œæ„å»ºæ—¶ç”Ÿæˆï¼Œè®¿é—®é€Ÿåº¦æå¿«ã€‚
- **ç»Ÿä¸€æ•°æ®è§†å›¾**ï¼šæ— è®ºæ˜¯æµè§ˆæ¯æ—¥ç®€æŠ¥ã€åˆ†ç±»ã€æ ‡ç­¾è¿˜æ˜¯æ”¶è—å¤¹ï¼Œæ‰€æœ‰æ–‡ç« æ•°æ®éƒ½ç»è¿‡èåˆå¤„ç†ï¼Œç¡®ä¿ä¿¡æ¯å®Œæ•´ä¸€è‡´ã€‚
- **å“åº”å¼çŠ¶æ€ç®¡ç†**ï¼šåº”ç”¨çŠ¶æ€åœ¨æ‰€æœ‰ç»„ä»¶é—´å®æ—¶åŒæ­¥ã€‚
  - **å®æ—¶åé¦ˆ**: æ”¶è—ã€æ ‡è®°å·²è¯»ç­‰æ“ä½œåœ¨æœåŠ¡ç«¯ç¡®è®¤åç«‹å³æ›´æ–°å…¨å±€çŠ¶æ€ï¼Œç¡®ä¿æ•°æ®ä¸¥æ ¼ä¸€è‡´ã€‚
  - **æ··åˆæ•°æ®æº**: "æˆ‘çš„æ”¶è—" åˆ—è¡¨é‡‡ç”¨æœåŠ¡ç«¯é¢„å– (SSR) + å®¢æˆ·ç«¯å®æ—¶çŠ¶æ€ (Zustand) çš„æ··åˆæ¨¡å¼ï¼Œæ—¢ä¿è¯é¦–å±é€Ÿåº¦ï¼Œåˆç¡®ä¿çŠ¶æ€å®æ—¶ä¸€è‡´ã€‚
- **é«˜æ€§èƒ½æ•°æ®è·å–**ï¼šåˆ©ç”¨ Next.js çš„æ‰©å±• `fetch` API å’Œ React Queryï¼Œå®ç°æ™ºèƒ½ç¼“å­˜å’Œå»é‡ã€‚
- **é«˜å¯ç”¨æ€§è®¾è®¡**ï¼š
  - **è¶…æ—¶ç†”æ–­**ï¼šæ•°æ®åº“æŸ¥è¯¢å†…ç½® 10s è¶…æ—¶ä¿æŠ¤ï¼Œé˜²æ­¢å†·å¯åŠ¨æˆ–ç½‘ç»œæ³¢åŠ¨å¯¼è‡´é¡µé¢æ— é™æŒ‚èµ·ã€‚
  - **é”™è¯¯è¾¹ç•Œ**ï¼šé¡µé¢çº§é”™è¯¯æ•è·ï¼Œç¡®ä¿å³ä½¿åç«¯æ•…éšœä¹Ÿèƒ½å‘ç”¨æˆ·å±•ç¤ºå‹å¥½çš„é‡è¯•ç•Œé¢ã€‚
- **æ¸è¿›å¼ Web åº”ç”¨ (PWA)**ï¼šæ”¯æŒç¦»çº¿è®¿é—®å’Œå¿«é€ŸåŠ è½½ï¼Œæä¾›æ¥è¿‘åŸç”Ÿåº”ç”¨çš„ä½“éªŒã€‚
- **åŒæ¨¡è®¿é—®æ§åˆ¶**ï¼š
  - **å…¬å…±åªè¯»æ¨¡å¼**ï¼šé»˜è®¤å…è®¸å…¬ä¼—è®¿é—®ï¼Œå¯ä»¥æµè§ˆæ‰€æœ‰ç®€æŠ¥å’Œæ–‡ç« ï¼Œä½†æ— æ³•è¿›è¡Œä»»ä½•ä¿®æ”¹ã€‚
  - **ç®¡ç†å‘˜æ¨¡å¼**ï¼šé€šè¿‡ URL Token (`?token=...`) æ¿€æ´»ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è®¾ç½®æŒä¹…åŒ– Cookie (`site_token`)ï¼Œæ— éœ€æ¯æ¬¡è®¿é—®éƒ½æºå¸¦ Tokenã€‚æ‹¥æœ‰å®Œæ•´æƒé™ï¼ˆå¦‚æ ‡è®°å·²è¯»ã€æ”¶è—ã€æŸ¥çœ‹åŸå§‹ RSSï¼‰ã€‚
- **ç¬¬ä¸‰æ–¹åµŒå…¥æ”¯æŒ**:
  - **Widget é›†æˆ**: æä¾›äº†ä¸“é—¨çš„ Widget è·¯ç”± (å¦‚ `/widget/clock.html`)ï¼Œé…ç½®äº†å®½æ¾çš„ CSP (`frame-ancestors *`)ï¼Œæ”¯æŒå°†ç»„ä»¶æ— ç¼åµŒå…¥åˆ° Notion, start.me ç­‰æ•ˆç‡å·¥å…·ä»ªè¡¨ç›˜ä¸­ã€‚
- **SEO æ·±åº¦ä¼˜åŒ–**:
  - **å…¨ç«™ SSR/ISR è¦†ç›–**: ä¸ä»…åŒ…æ‹¬æ¯æ—¥ç®€æŠ¥ï¼Œ**æ ‡ç­¾/åˆ†ç±»é¡µé¢ (`/stream/[id]`)** å…¨é¢å‡çº§ä¸º ISR å¢é‡é™æ€å†ç”Ÿï¼ˆ7å¤©ç¼“å­˜ï¼‰ï¼Œå°† FreshRSS æ–‡ç« åˆ—è¡¨ä¸ Supabase AI æ•°æ®èåˆï¼Œæ‰“é€ é«˜è´¨é‡å†…å®¹èšåˆé¡µã€‚
  - **è‡ªåŠ¨å…³é”®è¯æ³¨å…¥**:
    - **è‡ªåŠ¨å…³é”®è¯æå–**: æœåŠ¡å™¨è‡ªåŠ¨åˆ†æé¡µé¢å†…æ‰€æœ‰æ–‡ç« ï¼Œæå–é«˜é¢‘å…³é”®è¯ï¼ˆå¦‚ "GPT-4", "Transformer"ï¼‰ã€‚
    - **æ™ºèƒ½æ³¨å…¥**: å°†å…³é”®è¯æ³¨å…¥ Metadata (`keywords`, `description`)ã€‚
    - **å¯è§†åŒ–å¢å¼º**: é‡æ„äº† **Stream åˆ—è¡¨é¡µå¤´**ã€‚æ™ºèƒ½åŒºåˆ† "åˆ†ç±»" (æ— è®¡æ•°) ä¸ "æ ‡ç­¾" (å«è®¡æ•°) çš„å±•ç¤ºé€»è¾‘ï¼›"Related Topics" é‡‡ç”¨æ¸…çˆ½çš„çº¯æ–‡æœ¬åˆ—è¡¨è®¾è®¡ï¼Œæå‡é˜…è¯»ä½“éªŒã€‚
  - **å¯Œæ–‡æœ¬æ‘˜è¦**:
    - **JSON-LD å¢å¼º**: æ¯æ—¥ç®€æŠ¥é¡µé¢çš„ `NewsArticle` Schema ä¸­ï¼Œæ¯æ¡æ–°é—»éƒ½åŒ…å«äº† AI ç”Ÿæˆçš„ **"ä¸€å¥è¯ç²¾åæ‘˜è¦"**ã€‚
    - **æ•ˆæœ**: Google æœç´¢ç»“æœå¯ç›´æ¥å±•ç¤ºæ–°é—»è¯¦æƒ…ï¼Œå¤§å¹…æå‡ç‚¹å‡»ç‡ã€‚
  - **ç»“æ„åŒ–å†…é“¾**:
    - **æ—¶å…‰æœºå¯¼èˆª**: æ—¥å†é¡µåº•éƒ¨å¢åŠ  "ä¸Šä¸€ç¯‡ / ä¸‹ä¸€ç¯‡" å¯¼èˆªï¼Œç¡®ä¿çˆ¬è™«èƒ½é¡ºç€æ—¶é—´çº¿éå†æ‰€æœ‰å†å²å†…å®¹ï¼Œé˜²æ­¢å­¤å²›é¡µé¢ã€‚
  - **å¢é•¿å¼•æ“**:
    - **AI RSS Feed**: `/feed.xml` è‡ªåŠ¨åˆ†å‘ç»è¿‡ AI æ¸…æ´—å’Œç‚¹è¯„çš„å†…å®¹ï¼ˆéåŸæ–‡ï¼‰ï¼Œå¸å¼•è‡ªç„¶åå‘é“¾æ¥ã€‚
    - **è‡ªåŠ¨åŒ– Sitemap**: è‡ªåŠ¨å°† **æ‰€æœ‰åˆ†ç±»** å’Œæœ€æ´»è·ƒçš„ TOP 50 æ ‡ç­¾é¡µæ¨é€åˆ° `sitemap.xml`ã€‚é’ˆå¯¹åˆ†ç±»é¡µï¼Œé…ç½®äº† **Daily æ›´æ–°é¢‘ç‡** (å… Lastmod)ï¼Œç¡®ä¿é«˜é¢‘æ›´æ–°å†…å®¹è¢«æœç´¢å¼•æ“åŠæ—¶æŠ“å–ã€‚é…åˆ IndexNow å®ç°ç§’çº§æ”¶å½•ã€‚
  - **Canonical ä¿æŠ¤**: å…¨ç«™ç»Ÿä¸€é‡‡ç”¨ **WWW åŸŸå** (`https://www.alok-rss.top`) ä½œä¸ºå”¯ä¸€è§„èŒƒåœ°å€ï¼Œå½»åº•æ¶ˆç­é‡å¤å†…å®¹é£é™©ã€‚
    - **è‡ªåŠ¨é‡å®šå‘**: ä¾èµ– Vercel/Cloudflare è¾¹ç¼˜å±‚è‡ªåŠ¨å°† Root è¯·æ±‚é‡å®šå‘åˆ° WWWã€‚
    - **éªŒè¯é›†æˆ**: é¦–é¡µé›†æˆ **Baidu** (`baidu-site-verification`) å’Œ **Bing** (`msvalidate.01`) çš„ HTML éªŒè¯æ ‡ç­¾ï¼Œæ— éœ€ä¸Šä¼ æ–‡ä»¶ã€‚
    - **è‡ªåŠ¨æäº¤**: é›†æˆäº† IndexNow API (`api.indexnow.org`)ã€‚
    - **æäº¤å·¥å…·**: `utils/indexnow.ts` æä¾›äº† `submitUrlsToIndexNow` å‡½æ•°ã€‚
    - **API æ¥å£**: `/api/indexnow`
      - ä¸€é”®å…¨é‡æäº¤ (è‡ªåŠ¨æäº¤ Sitemap æ‰€æœ‰ URL)ã€‚
      - å•æ¡æäº¤ `?url=...`ã€‚
  - **é«˜å¯†åº¦ä¿¡æ¯ç­–ç•¥**:
    - **Meta Description**: æ‘’å¼ƒä¼ ç»Ÿçš„ç®€çŸ­æ‘˜è¦ï¼Œé‡‡ç”¨ **"åºå·åˆ—è¡¨ + TLDR"** æ¨¡å¼ï¼ˆä¾‹å¦‚ï¼š`1. AIè¾…åŠ©... 2. Memori...`ï¼‰ï¼Œåœ¨ SERP ä¸­ç›´æ¥å±•ç¤ºå½“æœŸ 10+ æ¡æ ¸å¿ƒè§‚ç‚¹ï¼Œæå¤§æå‡ä¿¡æ¯å¯†åº¦ã€‚
    - **Deep Content Rich Snippets**: åœ¨ JSON-LD çš„ `ListItem` ä¸­æ³¨å…¥ **å…¨é‡ AI æ‘˜è¦**ï¼Œè€Œéç®€å•çš„æ ‡é¢˜ï¼Œè®©æœç´¢å¼•æ“â€œè¯»æ‡‚â€æ¯ç¯‡æ–‡ç« çš„æ·±åº¦å†…å®¹ã€‚
    - **Crawler-Friendly Links**: å®Œç¾æ”¯æŒç¼–ç åçš„å¤æ‚æ ‡ç­¾ URLï¼ˆå¦‚ `/stream/user%2F-%2Flabel%2F%E5%90%8E%E7%AB%AF`ï¼‰ï¼Œç¡®ä¿çˆ¬è™«èƒ½é¡ºç•…ç´¢å¼•æ‰€æœ‰æ ‡ç­¾èšåˆé¡µã€‚
    - **Homepage Dual-Schema**: é¦–é¡µé‡‡ç”¨ **NewsArticle (ä»Šæ—¥å†…å®¹)** + **CollectionPage (å†å²å½’æ¡£)** åŒé‡ç»“æ„åŒ–æ•°æ®ï¼Œå…¼é¡¾å†…å®¹æ—¶æ•ˆæ€§æ’åä¸å†å²é¡µé¢ç´¢å¼•ã€‚
  - **åŠ¨æ€æ ‡é¢˜è¿›åŒ– (Title Party)**:
    - **ç­–ç•¥**: æ‘’å¼ƒæ­»æ¿çš„ "Daily Briefing" æ ‡é¢˜ã€‚æ ¹æ®æ–‡ç« æƒé‡ (`é‡è¦æ–°é—»` > `å¿…çŸ¥è¦é—»` > `å¸¸è§„æ›´æ–°`) è‡ªåŠ¨æå–å½“æ—¥ **Top 2 æ ¸å¿ƒå¤´æ¡** åŠ¨æ€ç”Ÿæˆ Title (e.g., `2025-12-13 Google Gemini 2.0å‘å¸ƒã€DeepSeekå¼€æº | RSS Briefing Hub`)ã€‚
    - **ä¼˜åŠ¿**: å¤§å¹…æå‡ SERP ç‚¹å‡»ç‡ï¼Œè®©ç”¨æˆ·åœ¨æœç´¢ç»“æœé¡µå°±èƒ½çœ‹åˆ°å½“å¤©çš„çˆ†ç‚¹æ–°é—»ã€‚
  - **æ™ºèƒ½ Sitemap ç­–ç•¥**:
    - **æ··åˆé¢‘ç‡**: é’ˆå¯¹ **â€œä»Šå¤©â€** çš„é¡µé¢ï¼Œé…ç½® `hourly` é¢‘ç‡ + `lastmod` å®æ—¶æ—¶é—´æˆ³ï¼Œè¿«ä½¿çˆ¬è™«é«˜é¢‘å›è®¿ä»¥æŠ“å–â€œä¸€æ—¥ä¸‰æ›´â€çš„å®æ—¶æ›´æ–°ï¼›é’ˆå¯¹ **â€œå†å²â€** é¡µé¢ï¼Œè‡ªåŠ¨é™çº§ä¸º `weekly`ï¼ŒèŠ‚çœçˆ¬å–é…é¢ã€‚
  - **SSR æœåŠ¡ç«¯ç›´è¿**:
    - **æ¶æ„å‡çº§**: ä¸ºäº†è§£å†³ Vercel ç¯å¢ƒä¸‹ "Loopback Request" (è¯·æ±‚è‡ªèº« API)å¯¼è‡´çš„ 401/500 é”™è¯¯ï¼Œé‡æ„äº† SSR æ•°æ®è·å–å±‚ã€‚
    - **æœºåˆ¶**: æœåŠ¡ç«¯ç»„ä»¶ (`stream/[id]`) ä¸å†èµ° HTTP API å±‚ï¼Œè€Œæ˜¯é€šè¿‡ `ssr-helpers.ts` ç›´æ¥è°ƒç”¨ FreshRSS/Supabase SDKã€‚
    - **æ”¶ç›Š**: å½»åº•æ ¹é™¤é‰´æƒä¸ç½‘ç»œå›è·¯é—®é¢˜ï¼Œé¦–å±æ€§èƒ½æå‡ 30% ä»¥ä¸Šã€‚
  - **ä¸»åŠ¨å¼ ISR**:
    - **ç­–ç•¥**: é’ˆå¯¹ `/stream/[id]` æ ‡ç­¾é¡µï¼Œå¯ç”¨ **7å¤©é•¿æ•ˆ ISR ç¼“å­˜**ã€‚
    - **æœºåˆ¶**: æ‘’å¼ƒä¼ ç»Ÿçš„â€œè¢«åŠ¨ç­‰å¾…è¿‡æœŸâ€ï¼Œé‡‡ç”¨ **â€œä¿®æ”¹å³åˆ·æ–°â€ (Revalidate-on-Tagging)** ç­–ç•¥ã€‚ç®¡ç†å‘˜åœ¨å‰ç«¯æ‰“æ ‡ç­¾æ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘ `/api/revalidate`ï¼Œç¬é—´æ›´æ–°è¾¹ç¼˜èŠ‚ç‚¹ç¼“å­˜ã€‚æ—¢äº«å—äº†é™æ€é¡µé¢çš„æè‡´æ€§èƒ½ï¼Œåˆå®ç°äº†åŠ¨æ€å†…å®¹çš„å®æ—¶æ€§ã€‚
  - **æè‡´çš„æ¸²æŸ“æ€§èƒ½ (Zero CLS & FOUC-Free)**:
    - **CSS-Driven Sidebar**: ä¾§è¾¹æ å“åº”å¼é€»è¾‘é‡æ„ä¸ºçº¯ CSS é©±åŠ¨ï¼Œå½»åº•æ¶ˆé™¤äº†ç§»åŠ¨ç«¯/æ¡Œé¢ç«¯åˆ‡æ¢æ—¶çš„æ ·å¼é—ªçƒ (FOUC) åŠä¸»çº¿ç¨‹é˜»å¡ã€‚
    - **æ–‡ç« é¡µé›¶ä½ç§»**: é€šè¿‡ `Playfair Display` å­—ä½“é¢„åŠ è½½ (`preload: true`) å’Œ **Synchronous Store Hydration** æŠ€æœ¯ï¼Œç¡®ä¿æ–‡ç« è¯¦æƒ…é¡µåœ¨é¦–å±æ¸²æŸ“æ—¶å­—å·ã€æ ‡ç­¾ä½ç½®å®Œå…¨ç¨³å®šï¼ŒCLS (Cumulative Layout Shift) è¯„åˆ†æ¥è¿‘ 0ã€‚
    - **æ— æ„Ÿæ—¶æ®µåˆ‡æ¢**: é’ˆå¯¹é¦–é¡µâ€œæŒ‰æ—¶æ®µè¿‡æ»¤â€çš„éœ€æ±‚ï¼Œé‡‡ç”¨ **Delayed Fade-In** ç­–ç•¥ã€‚æœåŠ¡ç«¯é»˜è®¤æ¸²æŸ“å…¨é‡å†…å®¹ï¼ˆéšå½¢ä»¥åŒ¹é… SSRï¼‰ï¼Œå®¢æˆ·ç«¯è®¡ç®—å®Œæœ¬åœ°æ—¶åŒºåä»¥ 0.7s ä¼˜é›…æ¸æ˜¾ç›®æ ‡å†…å®¹ï¼Œå®Œç¾è§£å†³äº†â€œæœåŠ¡ç«¯-å®¢æˆ·ç«¯æ—¶åŒºä¸ä¸€è‡´â€å¯¼è‡´çš„å†…å®¹è·³å˜é—®é¢˜ï¼Œå®ç°äº†â€œæ™šä¸€ç‚¹å‡ºç°ä½†ç»ä¸é—ªçƒâ€çš„é«˜çº§äº¤äº’ä½“éªŒã€‚

## ç”¨æˆ·ç•Œé¢ (UI) äº¤äº’

- **æ¯æ—¥è¿›åº¦æ ‡è®°**ï¼šåœ¨æ—¥å†è§†å›¾ä¸­ï¼Œæ¯ä¸ªæ—¥æœŸå‰éƒ½æœ‰ä¸€ä¸ªçŠ¶æ€å›¾æ ‡ï¼ˆ**ä»…ç®¡ç†å‘˜å¯è§**ï¼‰ï¼Œç”¨æˆ·å¯ä»¥ç‚¹å‡»å°†å…¶æ ‡è®°ä¸ºâ€œå·²å®Œæˆâ€ã€‚
- **å…¨å±€ä¾§è¾¹æ åˆ‡æ¢**ï¼š
  - **å“ç‰Œæ ‡è¯†**ï¼šä¾§è¾¹æ é¡¶éƒ¨æ–°å¢äº†å“ç‰Œ Logo å’Œå½©è™¹æ¸å˜é£æ ¼çš„ "Briefing Hub" æ ‡é¢˜ã€‚
  - **æœç´¢åŠŸèƒ½**ï¼šæä¾›å…¨æ–‡æœç´¢èƒ½åŠ›ï¼ˆ**ä»…ç®¡ç†å‘˜å¯è§**ï¼‰ã€‚
  - **å“åº”å¼è®¾è®¡**: å®Œç¾é€‚é…ç§»åŠ¨ç«¯ã€‚
    - **ä¾§è¾¹æ **ï¼šç§»åŠ¨ç«¯æ”¯æŒæŠ˜å ä¸è‡ªåŠ¨æ‰‹åŠ¿äº¤äº’ã€‚
    - **PWA å·¥å…·**ï¼šâ€œè¶‹åŠ¿â€é¡µé¢åº•éƒ¨é›†æˆ **â€œé‡è½½åº”ç”¨â€** æŒ‰é’®ï¼ˆä»…ç§»åŠ¨ç«¯å¯è§ï¼‰ï¼Œç”¨äºä¸€é”®æ¸…ç†ç¼“å­˜å’Œ Service Workerï¼Œè§£å†³ PWA æ›´æ–°é—®é¢˜ã€‚
    - **é˜…è¯»ä½“éªŒ**ï¼šä¼˜åŒ–äº†ç§»åŠ¨ç«¯æ¨¡æ€æ¡†çš„æŒ‰é’®å¸ƒå±€ï¼Œé˜²æ­¢è¢«é®æŒ¡ã€‚
- **æ²‰æµ¸å¼ç®€æŠ¥å¤´å›¾**ï¼š
  - **åŠ¨æ€æ—¥æœŸå¡ç‰‡**: é¡¶éƒ¨å±•ç¤ºå¤§å­—å·æ—¥æœŸå’Œé—®å€™è¯­ï¼ŒèƒŒæ™¯é‡‡ç”¨æ¯æ—¥éšæœºç”Ÿæˆçš„é£æ™¯å›¾ï¼ˆå¸¦é®ç½©ï¼‰ã€‚
  - **æ—¶æ®µåˆ‡æ¢å™¨**: é›†æˆæ—©/ä¸­/æ™šæ—¶æ®µåˆ‡æ¢åŠŸèƒ½ï¼Œæ”¯æŒç‚¹å‡»åˆ‡æ¢ç®€æŠ¥å†…å®¹ã€‚
  - **å†…å®¹ç±»å‹è¿‡æ»¤**: æ–°å¢ **"æ´å¯Ÿ vs æ–°é—»"** ç»´åº¦ã€‚ç”¨æˆ·å¯ä¸€é”®ç­›é€‰ "çŸ¥è¯†æ´å¯Ÿå‹" (Deep Dive) æˆ– "æ–°é—»äº‹ä»¶å‹" (News Event) æ–‡ç« ï¼Œæ»¡è¶³ä¸åŒé˜…è¯»è¯‰æ±‚ã€‚
- **åˆå¤œçº¸å¼ æ¨¡å¼**ï¼š
  - **æŠ¤çœ¼çº¸å¼ èƒŒæ™¯**: é‡‡ç”¨æŸ”å’Œçš„ç±³è‰²/çº¸å¼ è‰² (`#F2F0E4`) ä½œä¸ºä¸»èƒŒæ™¯ã€‚
  - **æ·±è‰²å¢¨æ°´æ–‡å­—**: é…åˆæµ…è‰²èƒŒæ™¯ï¼Œæ–‡å­—é‡‡ç”¨æ·±ç°è‰²/é»‘è‰²ï¼Œå½¢æˆç»å…¸çš„â€œç™½çº¸é»‘å­—â€æ•ˆæœã€‚
- **ç»Ÿä¸€é˜…è¯»ä½“éªŒ**ï¼š
  - **åŒæ¨¡å¼åˆ‡æ¢**ï¼šæ”¯æŒ **â€œğŸ“Š æ™ºèƒ½ç®€æŠ¥â€**ï¼ˆAI æ‘˜è¦ï¼‰å’Œ **â€œğŸ“„ åŸæ–‡é˜…è¯»â€**ï¼ˆå…¨æ–‡ï¼‰ã€‚
  - **æŒ‰éœ€åŠ è½½**ï¼šæ™ºèƒ½æ‹‰å– AI åˆ†ææ•°æ®ã€‚
- **è§†è§‰ä¸äº¤äº’å‡çº§**:
  - **çŸ¢é‡åŒ–å›¾æ ‡**: å…³é”®äº¤äº’å…ƒç´ ï¼ˆå¦‚æ”¶è—æ˜Ÿæ ‡ï¼‰å…¨é¢å‡çº§ä¸ºé«˜ç²¾åº¦ SVGï¼Œç¡®ä¿åœ¨ Retina å±å¹•ä¸Šçš„é”åˆ©æ˜¾ç¤ºä¸åƒç´ çº§å¯¹é½ã€‚
  - **é«˜å¯¹æ¯”åº¦å¯¼èˆª**: ç®€æŠ¥åº•éƒ¨é›†æˆå¤§å­—å·ã€é«˜å¯¹æ¯”åº¦çš„ "Time Machine" å¯¼èˆªï¼Œæä¾›æ¸…æ™°çš„ä¸Šä¸€ç¯‡/ä¸‹ä¸€ç¯‡è·³è½¬ä½“éªŒã€‚
- **è¶‹åŠ¿å·¥å…·é›†æˆ**:
  - ç‹¬ç«‹çš„ `/trends` é¡µé¢ï¼Œé‡‡ç”¨æç®€ä¸»ä¹‰è®¾è®¡ï¼Œå±•ç¤ºå‰æ²¿ AI æ¦œå•å’ŒæŠ€æœ¯è¶‹åŠ¿ã€‚
  - **SSG æ„å»º**ï¼šé¡µé¢å†…å®¹é™æ€ç”Ÿæˆï¼Œè®¿é—®é›¶å»¶è¿Ÿã€‚

## æŠ€æœ¯æ ˆ

- **æ ¸å¿ƒæ¡†æ¶**: Next.js 16 (App Router), React 19, TypeScript
- **æ ·å¼**: Tailwind CSS
- **ä»£ç è´¨é‡**: ESLint, Prettier, Husky, lint-staged
- **çŠ¶æ€ç®¡ç†**:
  - **æœåŠ¡å™¨çŠ¶æ€**: TanStack Query (React Query) - è´Ÿè´£å®¢æˆ·ç«¯æ•°æ®äº¤äº’ã€‚
  - **å®¢æˆ·ç«¯çŠ¶æ€**: Zustand - ç®¡ç† UI çŠ¶æ€å’Œä¹è§‚æ›´æ–°ã€‚
  - **å®‰å…¨æ€§**: sanitize-html - è·¨ç«¯ HTML æ¸…æ´—ä¸å¢å¼ºã€‚
- **è¾¹ç¼˜è®¡ç®—**: Next.js Proxy (åŸ Middleware) - ç”¨äºåœ¨ç½‘ç»œè¾¹ç¼˜å±‚å®ç°å®‰å…¨è®¿é—®æ§åˆ¶ã€‚
- **æ€§èƒ½ä¼˜åŒ–**:
  - **å›¾ç‰‡ä¼˜åŒ–**:
    - **å…¨é¢é‡‡ç”¨ `next/image`**: ç»„ä»¶æ”¯æŒ `picsum.photos` å’Œ `supabase.co` æºçš„è‡ªåŠ¨æ ¼å¼è½¬æ¢ (WebP/AVIF) å’ŒæŒ‰éœ€ç¼©æ”¾ï¼Œæ˜¾è‘—é™ä½ LCPã€‚
      - **Supabase Storage æ—è·¯ç¼“å­˜**:
        - **åŸç†**: ç®€æŠ¥å¤´å›¾é‡‡ç”¨äº† **Cache-Aside** ç­–ç•¥ã€‚æ¯æ—¥é¦–æ¬¡è®¿é—®æ—¶ï¼ˆRuntimeï¼‰ï¼ŒæœåŠ¡ç«¯ä¼šè‡ªåŠ¨ä» Picsum æŠ“å–é«˜æ¸…éšæœºå›¾ (Seedæ¨¡å¼) å¹¶ä¸Šä¼ è‡³ Supabase Storage (`public-assets` Bucket)ã€‚
        - **æ„å»ºä¼˜åŒ–**: åœ¨ Build/CI é˜¶æ®µï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è·³è¿‡å›¾ç‰‡æŠ“å–ä¸ä¸Šä¼ ï¼Œä»…ç”Ÿæˆå ä½é“¾æ¥ï¼Œé˜²æ­¢æ„å»ºè¶…æ—¶ (Timeouts)ã€‚çœŸæ­£çš„ç¼“å­˜åŠ¨ä½œæ¨è¿Ÿåˆ°ç¬¬ä¸€ä¸ªç”¨æˆ·è¯·æ±‚æ—¶è§¦å‘ã€‚
        - **ä¼˜åŠ¿**: å½»åº•æ¶ˆé™¤äº† Picsum çš„ 302 é‡å®šå‘å»¶è¿Ÿï¼Œæä¾›æé€Ÿçš„ CDN é™æ€æ–‡ä»¶è®¿é—® (200 OK)ï¼ŒåŒæ—¶ä¼˜åŒ–äº† SEO (çˆ¬è™«å‹å¥½)ã€‚
        - **è‡ªåŠ¨ç»´æŠ¤**:
          - **æ™ºèƒ½æ¸…ç†**: å†…ç½® **Retention Policy**ï¼Œæ¯æ¬¡ä¸Šä¼ æ–°å›¾æ—¶ä¼šè‡ªåŠ¨æ¸…ç† 30 å¤©å‰çš„æ—§å›¾ç‰‡ã€‚
          - **é…ç½®é›†ä¸­**: å›¾ç‰‡åˆ†è¾¨ç‡ï¼ˆå¦‚ `1600x1200`ï¼‰å·²æå–è‡³ `lib/constants.ts` ç»Ÿä¸€ç®¡ç†ï¼Œæ–‡ä»¶åè‡ªåŠ¨æºå¸¦åˆ†è¾¨ç‡åç¼€ï¼ˆå¦‚ `_1600x1200.jpg`ï¼‰ï¼Œä¿®æ”¹åˆ†è¾¨ç‡å¯è‡ªåŠ¨è§¦å‘ç¼“å­˜å¤±æ•ˆã€‚
        - **é›¶é…ç½®**: ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹å¹¶åˆ›å»º Bucketï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ã€‚
- **åç«¯æœåŠ¡**:
  - **Supabase**: æä¾›æ–‡ç« çš„æ ¸å¿ƒå†…å®¹å’Œè‡ªå®šä¹‰å…ƒæ•°æ®ã€‚
    > è¯¦ç»†å­—æ®µå®šä¹‰è¯·æŸ¥çœ‹ [types/supabase.ts](types/supabase.ts)ã€‚
    >
    > **æ³¨æ„**ï¼šè¯¥æ–‡ä»¶ç³»è‡ªåŠ¨ç”Ÿæˆï¼Œç›®å‰ä»…ä½œå‚è€ƒï¼Œæš‚æœªæ­£å¼å¼•å…¥ä»£ç ä¸­ä½¿ç”¨ã€‚
  - **FreshRSS**: æä¾› RSS è®¢é˜…ç®¡ç†ã€æ–‡ç« çŠ¶æ€å’Œæ ‡ç­¾ã€‚
    > è¯¦ç»† API å®šä¹‰è¯·æŸ¥çœ‹ [types/freshrss-greader.ts](types/freshrss-greader.ts)ã€‚
    >
    > **æ³¨æ„**ï¼šè¯¥æ–‡ä»¶ç³»è‡ªåŠ¨ç”Ÿæˆï¼Œç›®å‰ä»…ä½œå‚è€ƒï¼Œæš‚æœªæ­£å¼å¼•å…¥ä»£ç ä¸­ä½¿ç”¨ã€‚

### ç»Ÿä¸€æ•°æ®æ¨¡å‹

å‰ç«¯é€šè¿‡**æ•°æ®èåˆ**ï¼Œå°†ä¸Šè¿°ä¸¤ä¸ªæ•°æ®æºçš„ä¿¡æ¯åˆå¹¶æˆä¸€ä¸ªç»Ÿä¸€çš„ `Article` å¯¹è±¡ï¼š

1.  **Supabase**: æä¾›æ–‡ç« çš„æ ¸å¿ƒå†…å®¹ (Content, Summary, Verdict)ã€‚
2.  **FreshRSS**: æä¾›æ–‡ç« çš„å…ƒæ•°æ® (Read/Starred Status, Tags)ã€‚
3.  **èåˆé€»è¾‘**: `Article` å¯¹è±¡çš„ `tags` æ•°ç»„æ˜¯èåˆæ¨¡å‹çš„é›†ä¸­ä½“ç°ï¼Œæ··åˆäº†å¤šç§â€œæ ‡ç­¾ç±»â€ä¿¡æ¯ï¼Œç¡®ä¿å‰ç«¯ç»„ä»¶ï¼ˆå¦‚å¡ç‰‡ã€æ¨¡æ€æ¡†ï¼‰å¯ä»¥ç»Ÿä¸€å¤„ç†ã€‚

### å®‰å…¨æ€§æ¶æ„

- **HTML å†…å®¹æ¸…æ´—**: é‡‡ç”¨ **sanitize-html** è¿›è¡Œ**æœåŠ¡ç«¯ç»Ÿä¸€æ¸…æ´—** (Server-Side Only)ã€‚
  - **stripTags**: ç”¨äºç”Ÿæˆå®‰å…¨çš„ Metadata Description å’Œ Titleï¼Œé˜²æ­¢æ ‡ç­¾é—­åˆæ”»å‡»ã€‚
  - **sanitizeHtml**: åœ¨æ•°æ®è·å–å±‚ (`fetchArticleContentServer`) ç›´æ¥å¯¹ HTML è¿›è¡Œæ¸…æ´—ã€‚è¿™ä¸ä»…é˜²æ­¢äº† XSS æ”»å‡»ï¼Œè¿˜æ˜¾è‘—å‡å°‘äº†å®¢æˆ·ç«¯ bundle ä½“ç§¯ï¼ˆç§»é™¤äº†å®¢æˆ·ç«¯çš„ sanitization åº“ï¼‰ã€‚

## å‰ç«¯æ¶æ„ (Next.js App Router)

æœ¬é¡¹ç›®é‡‡ç”¨äº†æ¸…æ™°çš„ **Feature-Based** ç»„ä»¶æ¶æ„ã€‚

> ğŸ“š **è¯¦ç»†æ–‡æ¡£**: è¯·å‚é˜… [COMPONENT_CATALOG.md](./docs/COMPONENT_CATALOG.md) è·å–å®Œæ•´çš„ç»„ä»¶ç›®å½•è¯´æ˜ã€‚

### æ ¸å¿ƒåˆ†å±‚

- **`app/`**: **è·¯ç”±å±‚**ã€‚ä»…åŒ…å«è·¯ç”±å®šä¹‰ã€Metadata å’ŒæœåŠ¡ç«¯æ•°æ®é¢„å– (SSR)ã€‚
- **`components/features/`**: **ä¸šåŠ¡å±‚**ã€‚åŒ…å«æ‰€æœ‰å…·ä½“åŠŸèƒ½çš„å®ç° (å¦‚ `briefing`, `article`, `stream`)ã€‚
- **`components/layout/`**: **å¸ƒå±€å±‚**ã€‚åŒ…å«ä¾§è¾¹æ ã€å…¨å±€å¤–å£³å’Œå¸ƒå±€å®¹å™¨ã€‚
- **`components/common/`**: **åŸºç¡€å±‚**ã€‚åŒ…å«é€šç”¨ UI ç»„ä»¶å’Œ Providersã€‚
- **`lib/server/`**: **æœåŠ¡ç«¯æ ¸å¿ƒ**ã€‚åŒ…å«æ‰€æœ‰ç›´æ¥æ•°æ®åº“/APIè®¿é—®é€»è¾‘ (åŸ `app/lib/data.ts` å·²ç§»åŠ¨è‡³æ­¤)ã€‚
- **`utils/`**: **å·¥å…·å±‚**ã€‚åŒ…å«è·¨ç»„ä»¶çš„é€šç”¨çº¯å‡½æ•°ã€‚

> ğŸ“š **å·¥å…·å‡½æ•°è¯¦è§£**: å…³äºæ—¥æœŸå¤„ç†ã€HTMLæ¸…æ´—ã€é¢œè‰²ç”Ÿæˆç­‰é€šç”¨å·¥å…·çš„è¯¦ç»†è¯´æ˜ï¼Œè¯·å‚é˜… **[UTILS.md](./docs/UTILS.md)**ã€‚

è¿™ç§ç»“æ„ç¡®ä¿äº†å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œä½¿å¾—è·¯ç”±å±‚ä¿æŒè½»é‡ï¼Œä¸šåŠ¡é€»è¾‘é«˜åº¦å†…èšã€‚

### çŠ¶æ€ä¸æ•°æ®æµæ¶æ„è¯¦è§£

> ğŸ“š **API ä¸æœåŠ¡æ¶æ„è¯¦è§£**: å…³äºæœ€æ–°çš„ **API è·¯ç”±ç»“æ„**ã€**Hooks å°è£…**ã€**Server/Client ä»£ç æ‹†åˆ†**åŠ**æ•°æ®æµå‘**ï¼Œè¯·åŠ¡å¿…é˜…è¯» **[API.md](./docs/API.md)**ã€‚æœ¬èŠ‚ä»…ä»‹ç»å®¢æˆ·ç«¯å†…éƒ¨çŠ¶æ€ç®¡ç†ã€‚

#### å®¢æˆ·ç«¯çŠ¶æ€ä¸­å¿ƒ (`store/` - Zustand)

> ğŸ“š **Store æ¶æ„è¯¦è§£**: å…³äº **Store æ‹†åˆ†**ã€**æ ¸å¿ƒ State** åŠ **æ•°æ®æµå‘** çš„è¯¦ç»†è¯´æ˜ï¼Œè¯·é˜…è¯» **[STORE.md](./docs/STORE.md)**ã€‚

- **èŒè´£**: åº”ç”¨çš„**â€œå•ä¸€äº‹å®æ¥æºâ€**ä¸**å®¢æˆ·ç«¯ä¸šåŠ¡é€»è¾‘ä¸­å¿ƒ**ã€‚
- **æ ¸å¿ƒ Store**: `uiStore`, `articleStore`, `toastStore`ã€‚
- **æ™ºèƒ½æ›´æ–°**: Store å†…çš„ Actions å°è£…äº†æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œç¡®ä¿æ´¾ç”ŸçŠ¶æ€ï¼ˆå¦‚æ”¶è—åˆ—è¡¨ã€æ ‡ç­¾è®¡æ•°ï¼‰çš„å®æ—¶ä¸€è‡´æ€§ã€‚

## ç¯å¢ƒå˜é‡

è¯·åœ¨ `.env.local` æˆ– Vercel é¡¹ç›®è®¾ç½®ä¸­é…ç½®ï¼š

- `NEXT_PUBLIC_SUPABASE_URL` - Supabase é¡¹ç›® URL
- `NEXT_PUBLIC_SUPABASE_ANON_KEY` - Supabase åŒ¿åå¯†é’¥
- `SUPABASE_URL` - Supabase é¡¹ç›® URL (æœåŠ¡ç«¯)
- `SUPABASE_SERVICE_ROLE_KEY` - Supabase æœåŠ¡è§’è‰²å¯†é’¥ (æœåŠ¡ç«¯)
- `FRESHRSS_API_URL` - FreshRSS API URL
- `FRESHRSS_AUTH_TOKEN` - FreshRSS è®¤è¯ä»¤ç‰Œ
- `ACCESS_TOKEN` - ç®¡ç†å‘˜è®¿é—®ä»¤ç‰Œ

## å¼€å‘å‘½ä»¤

- `pnpm install` - å®‰è£…ä¾èµ–
- `pnpm run dev` - å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- `pnpm run build` - æ„å»ºç”Ÿäº§ç‰ˆæœ¬
- `pnpm run analyze` - æ„å»ºå¹¶åˆ†æ Bundle ä½“ç§¯
- `pnpm run start` - å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
- `pnpm run lint` - ä»£ç æ£€æŸ¥
- `pnpm run format` - ä»£ç è‡ªåŠ¨æ ¼å¼åŒ– (Prettier)
- `pnpm run gen:supabase-types` - è‡ªåŠ¨ç”Ÿæˆ Supabase æ•°æ®åº“ç±»å‹å®šä¹‰
- `pnpm run gen:freshrss-types` - è‡ªåŠ¨ç”Ÿæˆ FreshRSS ç±»å‹å®šä¹‰

## éƒ¨ç½²

é¡¹ç›®é’ˆå¯¹ **Vercel** è¿›è¡Œäº†ä¼˜åŒ–ï¼š

1.  å®‰è£… Vercel CLI: `npm install -g vercel`
2.  ç™»å½•: `vercel login`
3.  éƒ¨ç½²: `vercel` (é¢„è§ˆ) æˆ– `vercel --prod` (ç”Ÿäº§)

ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ« Next.js æ¡†æ¶å¹¶åº”ç”¨æœ€ä½³é…ç½®ã€‚
